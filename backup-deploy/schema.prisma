generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id             String    @id @default(cuid())
  email          String    @unique
  name           String
  password       String
  role           String    @default("BUYER")
  affiliateCode  String?   @unique
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

model Product {
  id             String    @id @default(cuid())
  name           String
  description    String
  price          Float
  category       String
  commissionRate Float     @default(30.0)
  imageUrl       String?
  createdAt      DateTime  @default(now())
}

model AffiliateLink {
  id          String   @id @default(cuid())
  productId   String
  affiliateId String
  code        String   @unique
  clicks      Int      @default(0)
  conversions Int      @default(0)
  createdAt   DateTime @default(now())
}

model Sale {
  id          String   @id @default(cuid())
  productId   String
  buyerId     String
  affiliateId String?
  amount      Float
  commission  Float
  status      String   @default("PENDING")
  createdAt   DateTime @default(now())
}
